# Debug OAuth 500 Error

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ 500 –æ—à–∏–±–∫–∏ –Ω–∞ `/api/decap`

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ runtime**
2. **API routes –Ω–µ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å –≤ production**  
3. **–û—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ API routes**
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Docker build**

## üß™ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

### 1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ OAuth –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
docker exec website-prod printenv | grep -E "(DECAP|AUTHJS)"

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
# DECAP_GITHUB_CLIENT_ID=Ov23liDxke33hnVMyefM
# DECAP_GITHUB_CLIENT_SECRET=32769066bd972e4ab9997f523e7783e9cd7e86b8
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs website-prod -f &

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å
curl "https://dmitrybond.tech/api/decap?provider=github&site_id=dmitrybond.tech&scope=repo"

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –ø–æ—è–≤–∏—Ç—Å—è –≤ –ª–æ–≥–∞—Ö
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å API routes –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–∏–ª–∏—Å—å
docker exec website-prod ls -la /app/dist/server/pages/api/decap/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞—Ç—É –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
docker exec website-prod stat /app/dist/server/pages/api/decap/_---params_.mjs

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
docker exec website-prod head -20 /app/dist/server/pages/api/decap/_---params_.mjs
```

### 4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å GitHub Actions:**
- –ó–∞—à–µ–ª –ª–∏ GitHub Actions workflow?
- –ó–∞–≤–µ—Ä—à–∏–ª—Å—è –ª–∏ build —É—Å–ø–µ—à–Ω–æ?
- –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ –≤ build logs?

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:

### **–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:**
```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
docker-compose --env-file .env.prod up -d --pull=always --force-recreate
```

### **–ï—Å–ª–∏ API routes —Å—Ç–∞—Ä—ã–µ:**
```bash
# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –æ–±—Ä–∞–∑ –∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
docker rmi ghcr.io/dmitrybond-tech/personal-website-prod:latest
docker pull ghcr.io/dmitrybond-tech/personal-website-prod:latest
```

### **–ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

## üìã Checklist:

- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –µ—Å—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- [ ] API routes –æ–±–Ω–æ–≤–∏–ª–∏—Å—å (–Ω–æ–≤–∞—è –¥–∞—Ç–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- [ ] GitHub Actions –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏
- [ ] Docker –æ–±—Ä–∞–∑ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
