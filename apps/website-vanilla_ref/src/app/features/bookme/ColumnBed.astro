---
// apps/website/src/app/features/bookme/ColumnBed.astro
// Stable container for Cal.com inline embed with official bootstrap
---

<section id="cal-section" class="booker-calendar relative isolate">
  <div id="cal-inline" data-cal-namespace="columnbed" class="cal-inline-wrapper min-h-[540px]"></div>
</section>

<!-- Official Cal.com bootstrap with namespace: "columnbed" -->
<script is:inline>
  (function (C, A, L) {
    let p = function (a, ar) { a.q.push(ar); };
    let d = C.document;
    C.Cal = C.Cal || function () {
      let cal = C.Cal, ar = arguments;
      if (!cal.loaded) {
        cal.ns = {}; cal.q = cal.q || [];
        d.head.appendChild(d.createElement("script")).src = A;
        cal.loaded = true;
      }
      if (ar[0] === L) {
        const api = function () { p(api, arguments); };
        const ns = ar[1]; api.q = api.q || [];
        typeof ns === "string" ? (cal.ns[ns] = api) && p(api, ar) : p(cal, ar);
        return;
      }
      p(cal, ar);
    };
  })(window, "https://app.cal.com/embed/embed.js", "init");
</script>

<!-- Global Cal configuration -->
<script is:inline>
  Cal.config = Cal.config || {};
  Cal.config.forwardQueryParams = true;
</script>
