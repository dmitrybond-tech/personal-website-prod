---
import type { BookMeEvent } from '../lib/cmsLoader';

interface Props {
  events: BookMeEvent[];
  locale: 'en' | 'ru';
}

const { events, locale } = Astro.props;
---

<div class="booker-row-3">
  {events.map((event) => (
    <button
      type="button"
      class="booking-tile w-full group rounded-2xl border p-4 text-left hover:shadow focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
      data-inline-link={event.link}
      data-inline-config='{"hideEventTypeDetails":true}'
      aria-pressed="false"
      aria-label={event.label}
    >
      <div class="text-lg font-semibold">{event.label}</div>
      <div class="mt-4 inline-flex items-center gap-2 text-sm opacity-90">
        <span>{locale === 'ru' ? 'Записаться' : 'Book'}</span>
        <span aria-hidden="true">→</span>
      </div>
    </button>
  ))}
</div>

<style>
  /* Active state for selected tiles */
  .booking-tile.active {
    outline: 2px solid var(--cv-accent);
    outline-offset: -2px;
    background: rgba(79, 70, 229, 0.05);
    border-color: var(--cv-accent);
  }

  /* Dark theme active state */
  :global(.dark) .booking-tile.active {
    background: rgba(79, 70, 229, 0.1);
    border-color: var(--cv-accent);
  }

  /* Loading state for cal-inline */
  :global(#cal-inline.is-loading) {
    opacity: 0.7;
    transition: opacity 0.3s ease;
  }
</style>
