/* DevsCard styles */
@import './devscard.css';

/* Tailwind v4 single import */
@import './tailwind.css';

/* Базовые стили из devscard */
@font-face {
  font-family: 'Inter var';
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
  src: url('/fonts/Inter-roman.var.woff2') format('woff2');
}

/* Unified theme tokens - DevsCard as single source of truth */
:root {
  /* Base surface + text, reused by cv-root and nav */
  --cv-surface: var(--cv-page-bg, #f6f7fb);
  --cv-surface-elevated: #ffffff;
  --cv-surface-elevated-2: #ffffff;
  --cv-text: #001111;
  --cv-muted: #6b7280;
  --cv-on-primary: #ffffff;

  /* Container/gutter variables */
  --cv-content-max-w: 1040px;  /* Content max width */
  --cv-nav-extra-w: 48px;  /* "slightly wider" than content */
  --cv-nav-max-w: calc(var(--cv-content-max-w) + var(--cv-nav-extra-w));  /* NavBar max width */
  --cv-content-pad-x: clamp(16px, 3.5vw, 24px);  /* Responsive horizontal padding */
  --cv-container-max: var(--cv-content-max-w);  /* Use unified content width */
  --cv-gutter-x: var(--cv-gap, 1.5rem);
  
  /* Bookme pages width constraint - now unified with content width */
  --bookme-max-w: var(--cv-content-max-w);

  /* Hairline border (derive from text) */
  --cv-border-hairline: color-mix(in oklab, var(--cv-text)/12%, transparent);

  /* Nav offset for subtle positioning */
  --cv-nav-offset-y: var(--cv-gap-y-sm, 6px);

  /* Primary colors from DevsCard */
  --cv-primary-50: #eef2ff;
  --cv-primary-100: #e0e7ff;
  --cv-primary-200: #c7d2fe;
  --cv-primary-300: #a5b4fc;
  --cv-primary-400: #818cf8;
  --cv-primary-500: #6366f1;
  --cv-primary-600: #4f46e5;
  --cv-primary-700: #4338ca;
  --cv-primary-800: #3730a3;
  --cv-primary-900: #312e81;
  --cv-primary-950: #1e1b4b;

  /* Nav aliases that point to the same base (DRY) */
  --cv-nav-surface: var(--cv-surface);
  --cv-nav-bar: var(--cv-surface-elevated);
  --cv-nav-island: var(--cv-surface-elevated-2);
  --cv-nav-border: var(--cv-border-hairline);
  --cv-nav-text: var(--cv-text);
  --cv-nav-muted: var(--cv-muted);
  --cv-nav-accent: var(--cv-primary-600);
  --cv-nav-accent-text: var(--cv-on-primary);

  /* Brand color for Cal.com integration */
  --brand-color: #0ea5e9;

  /* Light-only brand outline color */
  --cv-brand-light: #5b49ee;

  /* Dark-only inner backgrounds for nav */
  --cv-navisland-bg-dark: #1f2937; /* gray-800 */
  --cv-navpanel-bg-dark: #374151; /* gray-700 */
}

.dark {
  /* Dark theme overrides for unified tokens */
  --cv-surface: var(--cv-page-bg, #111827);
  --cv-surface-elevated: #1f2937;
  --cv-surface-elevated-2: #374151;
  --cv-text: #f9fafb;
  --cv-muted: #9ca3af;
  --cv-border-hairline: color-mix(in oklab, var(--cv-text)/16%, transparent);
  
  /* Dark nav accent */
  --cv-nav-accent: var(--cv-primary-400);
}

/* Дублирующий селектор для data-theme (если где-то завязано на data-theme) */
html[data-theme="dark"] {
  /* Dark theme overrides for unified tokens */
  --cv-surface: var(--cv-page-bg, #111827);
  --cv-surface-elevated: #1f2937;
  --cv-surface-elevated-2: #374151;
  --cv-text: #f9fafb;
  --cv-muted: #9ca3af;
  --cv-border-hairline: color-mix(in oklab, var(--cv-text)/16%, transparent);
  
  /* Dark nav accent */
  --cv-nav-accent: var(--cv-primary-400);
}

/* Базовые стили для body */
html, body {
  background: var(--cv-surface);
  color: var(--cv-text);
}

/* About pages: body-level background using cv-root tokens */
body.page-about {
  background: var(--cv-surface);
  color: var(--cv-text);
}

.dark body.page-about {
  background: var(--cv-surface);
  color: var(--cv-text);
}

html[data-theme="dark"] body.page-about {
  background: var(--cv-surface);
  color: var(--cv-text);
}

body {
  font-family: 'Inter var', system-ui, -apple-system, sans-serif;
  font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  font-variation-settings: normal;
}

/* Утилиты для анимаций */
.animate-show {
  animation: show 225ms ease-in-out;
}

/* Lightweight utilities that mirror cv-root */
@layer utilities {
  .bg-surface       { background: var(--cv-surface); }
  .bg-elev-1        { background: var(--cv-surface-elevated); }
  .bg-elev-2        { background: var(--cv-surface-elevated-2); }
  .text-body        { color: var(--cv-text); }
  .text-muted       { color: var(--cv-muted); }
  .border-hairline  { border-color: var(--cv-border-hairline); }
  .cv-container     { max-width: var(--cv-container-max); padding-left: var(--cv-content-pad-x); padding-right: var(--cv-content-pad-x); margin-inline: auto; }

  /* Nav offset utility */
  .nav-offset { margin-top: var(--cv-nav-offset-y); }

  /* Subtle, token-driven outline that respects border radius */
  .ui-outline {
    box-shadow: inset 0 0 0 1px var(--cv-border-hairline);
    border-radius: inherit;
  }
  .ui-outline:hover,
  .ui-outline:focus-visible {
    /* Slightly stronger on hover/focus, still token-based */
    box-shadow: inset 0 0 0 1.5px color-mix(in oklab, var(--cv-text) 20%, transparent);
    outline: none;
  }

  /* Light-only brand outline (1px, no width change on hover/focus) */
  .ui-outline-brandlight {
    box-shadow: inset 0 0 0 1px var(--cv-brand-light);
    border-radius: inherit;
  }
  .ui-outline-brandlight:hover,
  .ui-outline-brandlight:focus-visible {
    /* Keep 1px width, just slightly stronger color */
    box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--cv-brand-light) 80%, transparent);
    outline: none;
  }

  /* Sticky floating island behavior */
  .nav-sticky-floating {
    position: sticky;
    top: var(--cv-nav-offset-y);
    z-index: 50;
  }

  /* Island shadow for floating effect */
  .island-shadow {
    box-shadow: 0 6px 20px rgba(0,0,0,.06);
  }

  /* Bookme pages unified layout utilities */
  .booker-container {
    max-width: var(--bookme-max-w);
    width: 100%;
    margin-inline: auto;
    padding-left: var(--cv-content-pad-x);
    padding-right: var(--cv-content-pad-x);
    padding-top: 2rem;
    padding-bottom: 1rem;
  }

  .booker-calendar {
    max-width: var(--bookme-max-w);
    width: 100%;
    margin-inline: auto;
    padding-left: var(--cv-content-pad-x);
    padding-right: var(--cv-content-pad-x);
    padding-top: 1rem;
    padding-bottom: 1.5rem;
  }

  .booker-row-3 {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: var(--cv-gap-x-sm, 0.5rem);
    align-items: stretch;
  }

  /* Semantic BG for navisland inner container:
     Light -> reuse elevated surface from DevsCard;
     Dark  -> force exact hex via centralized token. */
  .navisland-bg { background: var(--cv-surface-elevated-2); }
  html.dark .navisland-bg { background-color: var(--cv-navisland-bg-dark); }

  /* Semantic BG for center-nav nav-panel:
     Light -> reuse elevated surface;
     Dark  -> exact hex from centralized token. */
  .navpanel-bg { background: var(--cv-surface-elevated-2); }
  html.dark .navpanel-bg { background-color: var(--cv-navpanel-bg-dark); }
}

/* NavBar component classes - now using DRY utilities/vars */
@layer components {
  @reference "./tailwind.css";
  
  .nav-surface {
    @apply sticky top-0 z-50 w-full;
    /* Using unified cv-root tokens */
    background-color: var(--cv-nav-surface);
    color: var(--cv-nav-text);
    border-bottom: 1px solid var(--cv-nav-border);
    /* высота и стабильность */
    min-height: var(--navbar-h, 60px);
  }

  /* Nav island using elevated surface - updated to .navisland */
  .navisland {
    background-color: var(--cv-nav-island);
    color: var(--cv-nav-text);
    border: 1px solid var(--cv-nav-border);
    border-radius: 16px;
    box-shadow: 0 6px 20px rgba(0,0,0,.06);
  }

  /* Inner panel that holds tabs */
  .nav-panel {
    background-color: var(--cv-nav-bar);
    border: 1px solid var(--cv-nav-border);
    border-radius: 9999px;
    padding: 0.25rem;
  }

  /* Chips/tabs/buttons inside navbar */
  .nav-chip {
    background-color: var(--cv-nav-bar);
    color: var(--cv-nav-text);
    border-radius: 9999px;
    padding: 0.5rem 1rem;
    line-height: 1;
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    transition: background-color .15s ease, color .15s ease, border-color .15s ease;
  }
  .nav-chip:hover,
  .nav-chip:focus-visible {
    filter: brightness(1.05);
  }
  .nav-chip[aria-current="page"],
  .nav-chip.is-active {
    background-color: var(--cv-nav-accent);
    color: var(--cv-nav-accent-text);
  }

  /* Language toggle inherits nav-item color */
  .nav-lang {
    color: var(--cv-nav-text);
  }

  .nav-item {
    color: var(--cv-nav-text);
    opacity: 0.92;
  }
  .nav-item:hover,
  .nav-item:focus-visible {
    opacity: 1;
  }
}

